Definition of Done (DoD) для проекта: «Разработка хранилища данных мобильного приложения для создания аналитической платформы по платежам и поведению пользователей»
________________________________________

1.	Цель и ценность (Business Value) сформулированы и задокументированы

	Четко описана бизнес-ценность хранилища.
	Определены стейкхолдеры (например, маркетологи, product-менеджеры, аналитики) и их ключевые вопросы к данным (KPI).

Суть идеи: 
	Разработано централизованное хранилище данных (DWH), которое агрегирует разрозненные данные из всех ключевых источников мобильного приложения: данные о событиях (клики, просмотры, сессии) и финансовые данные о платежах. На основе этого хранилища созданы набор интерактивных дашбордов, которые дают полную картину того, как пользователи ведут себя в приложении и как это поведение конвертируется в денежные операции.

Ключевые компоненты:
	Data Warehouse (DWH): Единый "источник правды", где данные о событиях и платежах связаны на уровне отдельных пользователей.
	ETL/ELT процессы: Автоматизированные pipelines, которые ежедневно обновляют данные в хранилище.
	BI-дашборды: Инструменты для визуализации, позволяющие без написания кода отвечать на ключевые бизнес-вопросы в режиме реального времени.

Business Value (Ценность для бизнеса)
	Разработка этой платформы не является технической задачей ради самой себя. Ее внедрение напрямую повлияет на ключевые бизнес-метрики и решит конкретные проблемы:
Бизнес-проблема (Без платформы)	Решение (С платформой)	Business Value (Ценность и измеримый результат)
Принятие решений вслепую.
Маркетолог, продукт-менеджер и аналитик работают с разными системами (Bitrix, CRM). Нет единой картины.	Единый источник истины.
Все данные собраны в одном месте и согласованы между собой.	Повышение скорости и качества решений.
Сокращение времени на сбор данных и формирование отчетов с дней/часов до минут. Решения принимаются на основе полных данных, а не догадок.
Невозможность анализа полного пути пользователя.
Непонятно, какие действия пользователя приводят к покупке, а какие — к уходу.	Связь поведения и платежей.
Можно проанализировать всю воронку: от первого запуска до платежа и повторной покупки.	Рост монетизации (LTV).
Выявление и устранение "узких мест" в воронке покупки может увеличить конверсию. Понимание поведения ценных пользователей помогает 
удерживать их и привлекать похожих.
Неэффективный маркетинговый бюджет.
Нельзя точно определить, какие рекламные каналы привлекают не просто "установщиков", а платящих пользователей.	Расчет CAC и ROMI по каналам.
Платформа позволяет связать расходы на рекламу с доходами от реальных платежей с точностью до канала.	Оптимизация рекламных расходов.
Возможность перенаправить бюджет с каналов с низкой ROI на каналы с высокой ROI может снизить стоимость привлечения платящего клиента (CAC).
Высокий уровень оттока пользователей (churn).
Пользователи перестают пользоваться приложением, и непонятно, почему это происходит.	Когортный и поведенческий анализ.
Возможность выявить паттерны поведения, которые предшествуют уходу (например, пользователи, которые не совершили действие Х в первые N дней, уходят чаще).	Снижение оттока (churn rate).
Проактивное удержание пользователей из групп риска (рассылки, push-уведомления, специальные предложения) может снизить месячный отток, что значительно увеличивает LTV.
Ручная работа аналитиков.
Аналитики постоянно пишут одни и те же SQL-запросы и сводят таблицы вручную в Excel.	Автоматизация отчетности.
Ключевые метрики (DAU, MAU, Revenue, LTV, CAC) рассчитываются автоматически и всегда актуальны.	Освобождение ресурсов аналитиков.
Высвобождается время аналитиков от рутинной работы для проведения более глубоких исследований (причинно-следственный анализ, прогнозное моделирование).

Итог: Данная платформа — это не просто отчетность, а стратегический актив, который позволяет перевести управление продуктом и маркетингом на основе данных (data-driven decision making). Она напрямую влияет на выручку (через рост конверсии и LTV) и рентабельность (через снижение CAC и затрат на аналитику).









2.	Архитектура решения спроектирована и визуализирована

Схема в виде диаграммы (draw.io) прилагается к текущему описанию.

На схеме явно указаны:
Источники данных: Различные базы данных мобильного приложения, в которые “приходят” данные от микросекрвисов , Bitrix-система, API, Файлы:
	- Базы данных: MySQL, PostgreSQL, PL/SQL.  
	- API: Яндекс, НБРБ .  
	- Файлы: Excel, TXT, CSV, DOCX.  
Процесс ETL/ELT:  Инструмент оркестрации  - Apache Airflow ,а так же SQL-скрипты в хранимых процедурах БД PostgreSQL и SQL - скрипты на уровне БД Clickhouse скрипты
Хранилище данных (DWH): Для хранения данных и сохранения целостности и качества данных выбранная и развернутая БД - PostgreSQL. Для организации быстрого доступа к данным через BI-инструмент параллельно развернута БД -  Clickhouse
BI-инструмент: Для визуализации данных выбран и развернут инструмент - для Apache Superset

3.	Источники данных идентифицированы и описаны

1. Реляционные базы данных (MySQL, PostgreSQL, PL/SQL)
Роль в проекте: Основные операционные источники, содержащие актуальные данные о транзакциях, пользователях, продуктах и бизнес-процессах.
Параметр	Описание
Тип данных	Структурированные, реляционные данные.
Назначение	MySQL: Хранение данных в учетной системе Bitrix.
PostgreSQL: Финансовые транзакции, история операций, справочники продуктов.
PL/SQL (Oracle): Хранение данных о клиентах юрлиц, договорах, отчетности,  данных о пользователях (профили, настройки, сессии).
Способ получения	Прямое подключение через JDBC/ODBC-коннекторы. Использование SQL-запросов для инкрементальной выгрузки (по полям trans_date, transaction_id и т.д).
Регулярность	Пакетная ежедневная выгрузка (в период низкой нагрузки, начало, в 00:30).
Объем данных	Средний/высокий (от 1 ГБ до 1 ТБ и более).
Критичность	Высокая (основной источник для финансовой аналитики).





2. Внешние API (Яндекс, НБРБ)

Роль в проекте: Источники актуальных справочных и рыночных данных для обогащения внутренней информации.
Параметр	Описание
Тип данных	Полуструктурированные данные (JSON/XML).
Назначение	API Яндекс: Геокодирование (определение координат адресов), данные о трафике.
API НБРБ: Актуальные курсы валют (доллар, евро, рубль)
Способ получения	Автоматические запросы через REST API с использованием ключей доступа (API keys).
Регулярность	Курсы валют: Ежедневно
Геоданные: По мере необходимости (при обработке новых адресов)
Объем данных	Низкий (десятки запросов в день).
Критичность	Средняя (важно для корректности финансовых расчетов и геоаналитики).


3. Файлы (Excel, CSV, TXT, DOCX)

Роль в проекте: Вспомогательные источники для загрузки справочников, отчетов партнеров и ручных выгрузок.
Параметр	Описание
Тип данных	Структурированные (CSV, Excel), полуструктурированные (TXT), неструктурированные (DOCX).
Назначение	CSV/Excel: Выгрузки из CRM, отчеты от партнеров, справочники товаров.
TXT: Логи серверов, результаты обработки данных.
DOCX: Договоры, документация, описания продуктов.
Способ получения	Загрузка в  FTP-сервер.
Регулярность	Ежедневно: CSV-файлы с данными о продажах.
Еженедельно: Отчеты в Excel от маркетингового агентства.
По мере поступления: Документы в формате DOCX.
Объем данных	Низкий/средний (от 1 МБ до 10 ГБ).
Критичность	Низкая/средняя (зависит от конкретного файла).
4.	Хранилище данных (DWH) спроектировано, развернуто и заполнено

В качестве хранилища данных используются две базы даных:
•	PostgreSQL – основной слой для хранения, трансформации и реляционных данных
•	ClickHouse – аналитические витрины и агрегаты (высокая скорость обработки больших данных)
В БД PostgreSQL  д анные хранятся в трех схемах:  
- stage — сырые данные,  
- dimention — промежуточные наборы данных, формирующиеся в процессе обработки.  
- bi(fact)  - итоговые очищенные и обогащенные данные.
Данные обрабатываются с помощью sql-скриптов, которые хранятся в процедурах и запускаются по расписанию и в следующем порядке:
1. Очистка временных данных
Первый этап — удаление устаревших данных из временных таблиц, которые ежедневно перезаписываются. Данные хранятся в двух схемах:  
- stage — сырые данные,  
- dimention — промежуточные наборы данных, формирующиеся в процессе обработки.  


2. Выгрузка данных из источников

После очистки начинается загрузка данных из внешних источников:  
- Базы данных: MySQL, PostgreSQL, PL/SQL.  
- API: Яндекс, НБРБ .  
- Файлы: Excel, TXT, CSV, DOCX.  

Особенности процесса:
- Запросы к разным БД выполняются параллельно (3 процесса одновременно), так как источники независимы.  
- В рамках одной БД запросы выполняются последовательно, чтобы снизить нагрузку. Однако легкие запросы можно распараллелить.  
- Данные выгружаются за отчетный период (обычно за предыдущий день) – Инкрементальная выгрузка. Если дата отсутствует, забираются либо все данные, либо формируется выборка на основе сравнения с имеющимися данными – Полная выгрузка.  

3. Проверка данных 

Во время выгрузки выполняются проверки на:  
- Несоответствие типов данных,  
- Критические ошибки (например, нарушение бизнес-правил).  

Обработка ошибок:
Критические ошибки останавливают процесс до ручного исправления.  
Некритические ошибки (например, проблемы с отдельными записями) обрабатываются автоматически: проблемные данные исключаются из обработки и сохраняются в отдельные таблицы для последующего анализа.  

4. Трансформация данных

После выгрузки данные преобразуются:  
- Очищаются (нормализация текста, удаление спецсимволов и др.),  
- Объединяются (обогащение) (джойны с справочниками, геокодирование и др.).  
- Группируются (предварительные расчеты для BI).

Трансформация выполняется на нашей стороне в PostgreSQL, чтобы не нагружать источники сложными вычислениями. Результат — реляционный слой, готовый для аналитики.  

5. Подготовка данных для BI (Apache Superset)

Для удобства визуализации в Apache Superset данные агрегируются:  
- Рассчитываются ключевые метрики,  
- Формируются витрины данных.  
Основные агрегаты создаются в ClickHouse, куда данные переносятся из PostgreSQL.  
Перенос данных осуществляется несколькими параллельными процессами.

5.	Созданы дашборды, отвечающие на ключевые бизнес-вопросы

На основе обработанных данных сформировано более 50 дашбордов:
•	Дашборды для топменеджмента, для принятия управленческих решений
•	Дашборды для маркетинга
•	Дашбопды для бизнеса пео разным направлениям
И др.
Примеры дашбордов:

Клиенты. Физлица
1. Назначение и Целевая аудитория:
Назначение: Предоставить полную картину о клиентской базе — физических лицах, использующих мобильное платежное приложение. Дашборд предназначен для анализа портрета пользователя, его активности, платежного поведения и жизненного цикла.
Целевая аудитория: Руководитель продукта, маркетологи, аналитики, специалисты по удержанию клиентов (CRM).
2. Ключевые бизнес-вопросы, на которые отвечает дашборд:
	Как растет клиентская база?
	Из каких регионов пользователи?
	Насколько активны клиенты? Как часто они совершают операции?
	Каковы предпочтения пользователей в способах оплаты и типах операций?
	Сколько клиентов у нас теряется и на каком этапе?
	Кто самые ценные клиенты?

Клиенты. Юрлица
1. Назначение и Целевая аудитория:
Назначение: Мониторинг и анализ корпоративной клиентской базы — юридических лиц и предпринимателей, использующих приложение для бизнес-операций. Фокус на B2B-метриках, финансовых потоках и жизненном цикле.
Целевая аудитория: Руководитель по развитию бизнеса, B2B-маркетологи, корпоративные менеджеры, финансовый директор.
2. Ключевые бизнес-вопросы:
	Как растёт база корпоративных клиентов?
	Каковы основные отрасли и размеры бизнеса наших клиентов?
	Какова платёжная активность юрлиц? (обороты, частота транзакций)
	Какие тарифы и пакеты услуг наиболее популярны?
	Как удерживаем ключевых корпоративных клиентов?

Основные показатели системы
1. Назначение и Целевая аудитория:
Назначение: Предоставить высшему руководству (C-level, директорам по направлениям) единую, сводную картину здоровья и эффективности всей экосистемы платежного приложения в разрезе ключевых бизнес-метрик. Это "приборная панель" для стратегического управления.
Целевая аудитория: Генеральный директор, Финансовый директор (CFO), Коммерческий директор, Директор по продукту.
2. Ключевые бизнес-вопросы, на которые отвечает дашборд:
	Есть л рост? Каковы основные финансовые показатели?
	Насколько активно используют приложение?
	Насколько эффективно monetize пользовательскую базу?
	Какие направления (B2C/B2B) и отрасли (вертикали) являются драйверами роста?
	Каково качество клиентской базы?
	Где находятся основные риски и возможности?

Направление: Автоцентры

1. Назначение и Целевая аудитория:
Назначение: Мониторинг и анализ эффективности работы с автоцентрами (дилерскими центрами, сервисами, магазинами автозапчастей) — ключевыми B2B-клиентами в автомобильной вертикали. Дашборд фокусируется на финансовых потоках, качестве обслуживания и развитии сети.
Целевая аудитория: Руководитель направления B2B, менеджеры по работе с ключевыми клиентами, аналитики отдела автопродаж, маркетологи B2B.
2. Ключевые бизнес-вопросы:
	Какой совокупный оборот и комиссионный доход генерируют автоцентры?
	Какие типы автоцентров (дилеры, сервисы, запчасти) наиболее прибыльны?
	Какова динамика среднего чека и количества транзакций?
	Какие бренды и регионы показывают наилучшие результаты?
	Насколько стабильны и лояльны наши партнеры-автоцентры?
	Какие услуги автоцентров наиболее популярны у плательщиков (физлиц)?

3 сегмент: Ритейл - продукты питания Супермаркеты

1. Назначение и Целевая аудитория:
Назначение: Мониторинг и анализ эффективности работы с сетевыми и несетевыми продуктовыми ритейлерами. Фокус на массовых низкочековых транзакциях, высокой частоте и проникновении услуги в повседневные привычки пользователей.
Целевая аудитория: Руководитель направления ритейла, партнерские менеджеры, маркетологи (запускающие кэшбэк-акции), аналитики.
2. Ключевые бизнес-вопросы:
	Какова доля рынка (охват) нашего платежного решения в продуктовом ритейле?
	Насколько часто пользователи платят в супермаркетах через наше приложение? (частота транзакций)
	Какова средняя корзина покупок?
	Влияют ли кэшбэк-акции и спецпредложения на оборот и лояльность?
	Какие торговые сети являются лидерами по обороту, а какие — по количеству чеков?
	Какая география самая активная?
	Есть ли сезонность и пиковые дни/часы?


7. ✅ Сформулированы аналитические выводы на основе данных
Где: В статье на Хабре и в README.md.
Что: На основе данных с дашбордов сделано не менее 5 выводов. Например:
"35% пользователей доходят от просмотра товара до корзины, но только 8% совершают покупку. Есть проблема на этапе оформления заказа."
"Пользователи, пришедшие из канала X, имеют на 25% выше LTV, чем из канала Y."
"Пик платежной активности происходит в воскресенье вечером."



8. ✅ Проект опубликован и код доступен
Где: Статья на Хабре/Medium, репозиторий на GitHub.
Что:
Статья подробно описывает весь путь: от постановки задачи и выбора архитектуры до скриншотов дашбордов и выводов.
GitHub-репозиторий содержит:
Весь исходный код (SQL-скрипты схемы DWH, Python-скрипты ETL/ELT, конфигурации).
Подробный README.md с описанием проекта, инструкцией по запуску и объяснением структуры папок.
Файлы с примерами данных (если возможно).
________________________________________

